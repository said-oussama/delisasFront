<div class="content-wrapper container-xxl p-0">
  <div class="content-body">
    <div class="row match-height" *ngIf="isAdmin">
      <div class="col-xl-12 col-md-6 col-12"  *ngIf="displayForm==false">
        <div class="card card-statistics">
          <div class="card-header">
            <h4 class="card-title">Statistique Génerale</h4>
            <div class="d-flex align-items-center">
            </div>
          </div>
          <div class="card-body statistics-body">
    
            <div class="row">
              <div class="col-sm-6 col-xl-3 mb-2 mb-xl-0">
                <div class="media">
                  <div class="avatar bg-light-primary mr-2">
                    <div class="avatar-content">
                      <a   class="btn  btn-just-icon" >
                        <i data-feather="edit"  class="avatar-icon"> </i>
                      </a> 
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{consoleStatistics.totalConsole}}</h4>
                    <p class="card-text font-small-3 mb-0">Nombre Total Des Consoles</p>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-xl-3">
                <div class="media">
                  <div class="avatar bg-light-success mr-2">
                    <div class="avatar-content">
                      <a   class="btn  btn-just-icon">
                      <i data-feather="truck" class="avatar-icon"></i>
                    </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{consoleStatistics.nbrConsoleSortantHubs}}</h4>
                    <p class="card-text font-small-3 mb-0">Nombre Total Des Consoles En attente</p>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-xl-3 mb-2 mb-sm-0">
                <div class="media">
                  <div class="avatar bg-light-info mr-2">
                    <div class="avatar-content">
                      <a   class="btn  btn-just-icon">
                        <i data-feather="check-square" class="avatar-icon"></i>
                      </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{consoleStatistics.nbrConsoleEntrantHubs}}</h4>
                    <p class="card-text font-small-3 mb-0">Nombre Total Des Consoles Approuvés</p>
                  </div>
                </div>
              </div>
      
            </div>
            
          <div class="row">
            <p></p><br>
            <br>
          </div>
            <div class="row">
              <div class="col-sm-6 col-xl-3">
                <div class="media">
                  <div class="avatar bg-light-warning mr-2">
                    <div class="avatar-content">
                      <a  class="btn  btn-just-icon">
                      <i data-feather="check-square" class="avatar-icon"></i>
                    </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{debriefStatistics.nbrDebriefCloture}}</h4>
                    <p class="card-text font-small-3 mb-0">Nombre Total des debriefs cloturé</p>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-xl-3">
                <div class="media">
                  <div class="avatar bg-light-success mr-2">
                    <div class="avatar-content">
                      <a  class="btn  btn-just-icon">
                        <i data-feather="clock" class="avatar-icon"></i>
                      </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{debriefStatistics.nbrDebriefNonCloture}}</h4>
                    <p class="card-text font-small-3 mb-0">Nombre Total des debriefs non cloturé</p>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-xl-3">
                <div class="media">
                  <div class="avatar bg-light-warning mr-2">
                    <div class="avatar-content">
                      <a   class="btn  btn-just-icon">
                        <i data-feather="check-circle" class="avatar-icon"></i>
                      </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{debriefStatistics.nbrColisLivre}}</h4>
                    <p class="card-text font-small-3 mb-0">Nombre Total Des Colis Livrés</p>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-xl-3">
                <div class="media">
                  <div class="avatar bg-light-danger mr-2">
                    <div class="avatar-content">
                      <a    class="btn  btn-just-icon">
                      <i data-feather="check-circle" class="avatar-icon"></i>
                    </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{debriefStatistics.totalColisDebrief}}</h4>
                    <p class="card-text font-small-3 mb-0">Nombre Total Des Colis Debrifés </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row match-height" *ngIf="isAdmin || isFournisseur">
      <div class="col-xl-12 col-md-6 col-12"  >
        <div class="card card-statistics">
          <div class="card-header">
            <h4 class="card-title">Nombre des colis par état</h4>
            <div class="d-flex align-items-center">
            </div>
          </div>
          <div class="card-body statistics-body">
            <div class="row">
              <div class="col-sm-6 col-xl-3 mb-2 mb-xl-0">
                <div class="media">
                  <div class="avatar bg-light-secondary mr-2">
                    <div class="avatar-content">
                      <a (click)="filterColis('total',listColisModal)"  class="btn  btn-just-icon">
                        <i data-feather="clipboard" class="avatar-icon"></i>
                      </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{totalstate.total}}</h4>
                    <p class="card-text font-small-3 mb-0">Tout les colis</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <p></p><br>
              <br>
            </div>
            <div class="row">
              <div class="col-sm-6 col-xl-3 mb-2 mb-xl-0">
                <div class="media">
                  <div class="avatar bg-light-primary mr-2">
                    <div class="avatar-content">
                      <a  (click)="filterColis('cree',listColisModal)" class="btn  btn-just-icon" >
                        <i data-feather="edit"  class="avatar-icon"> </i>
                      </a> 
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{totalstate.cree}}</h4>
                    <p class="card-text font-small-3 mb-0">Colis crées</p>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-xl-3 mb-2 mb-xl-0">
                <div class="media">
                  <div class="avatar bg-light-secondary mr-2">
                    <div class="avatar-content">
                      <a (click)="filterColis('enAttenteDEnlevement',listColisModal)" class="btn  btn-just-icon">
                        <i data-feather="watch" class="avatar-icon"></i>
                      </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{totalstate.enAttenteDEnlevement}}</h4>
                    <p class="card-text font-small-3 mb-0">Colis en attente de prelevement</p>
                  </div>
                </div>
              </div>
            
              <div class="col-sm-6 col-xl-3 mb-2 mb-sm-0">
                <div class="media">
                  <div class="avatar bg-light-info mr-2">
                    <div class="avatar-content">
                      <a  (click)="filterColis('enStock',listColisModal)" class="btn  btn-just-icon">
                        <i data-feather="archive" class="avatar-icon"></i>
                      </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{totalstate.enStock}}</h4>
                    <p class="card-text font-small-3 mb-0">Colis en stock</p>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-xl-3">
                <div class="media">
                  <div class="avatar bg-light-success mr-2">
                    <div class="avatar-content">
                      <a (click)="filterColis('enCoursDeLivraison',listColisModal)" class="btn  btn-just-icon">
                      <i data-feather="truck" class="avatar-icon"></i>
                    </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{totalstate.enCoursDeLivraison}}</h4>
                    <p class="card-text font-small-3 mb-0">Colis en cours de livraison</p>
                  </div>
                </div>
              </div>
            </div>
            
          <div class="row">
            <p></p><br>
            <br>
          </div>
            <div class="row">
              <div class="col-sm-6 col-xl-3">
                <div class="media">
                  <div class="avatar bg-light-warning mr-2">
                    <div class="avatar-content">
                      <a (click)="filterColis('livre',listColisModal)" class="btn  btn-just-icon">
                      <i data-feather="check-square" class="avatar-icon"></i>
                    </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{totalstate.livre}}</h4>
                    <p class="card-text font-small-3 mb-0">Colis livrés</p>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-xl-3">
                <div class="media">
                  <div class="avatar bg-light-success mr-2">
                    <div class="avatar-content">
                      <a (click)="filterColis('livrePaye',listColisModal)" class="btn  btn-just-icon">
                        <i data-feather="dollar-sign" class="avatar-icon"></i>
                      </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{totalstate.livrePaye}}</h4>
                    <p class="card-text font-small-3 mb-0">Colis livrés et payés</p>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-xl-3">
                <div class="media">
                  <div class="avatar bg-light-warning mr-2">
                    <div class="avatar-content">
                      <a (click)="filterColis('planificationRetour',listColisModal)" class="btn  btn-just-icon">
                        <i data-feather="rotate-cw" class="avatar-icon"></i>
                      </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{totalstate.planificationRetour}}</h4>
                    <p class="card-text font-small-3 mb-0">Colis planifiés retour</p>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-xl-3">
                <div class="media">
                  <div class="avatar bg-light-danger mr-2">
                    <div class="avatar-content">
                      <a (click)="filterColis('retourne',listColisModal)" class="btn  btn-just-icon">
                      <i data-feather="refresh-cw" class="avatar-icon"></i>
                    </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{totalstate.retourne}}</h4>
                    <p class="card-text font-small-3 mb-0">Colis retournés </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <p></p><br>
              <br>
            </div>
            <div class="row">
              <div class="col-sm-6 col-xl-3">
                <div class="media">
                  <div class="avatar bg-light-warning mr-2">
                    <div class="avatar-content">
                      <a (click)="filterColis('enCoursDeTransfert',listColisModal)" class="btn  btn-just-icon">
                      <i data-feather="truck" class="avatar-icon"></i>
                    </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{totalstate.enCoursDeTransfert}}</h4>
                    <p class="card-text font-small-3 mb-0">En Cours De Transfert</p>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-xl-3">
                <div class="media">
                  <div class="avatar bg-light-success mr-2">
                    <div class="avatar-content">
                      <a (click)="filterColis('retourEchange',listColisModal)" class="btn  btn-just-icon">
                        <i data-feather="refresh-cw" class="avatar-icon"></i>
                      </a>
                    </div>
                  </div>
                  <div class="media-body my-auto">
                    <h4 class="font-weight-bolder mb-0">{{totalstate.retourEchange}}</h4>
                    <p class="card-text font-small-3 mb-0">Retour Echange</p>
                  </div>
                </div>
              </div>
          
        
            </div>
          </div>
        </div>
      </div>
    </div>
   
  </div>
</div>
<ng-template #listColisModal let-modal>
  <section id="multiple-column-form">
      <div class="row match-height">
          <div class="col-12">
              <div class="modal-header">
                  <h5 class="modal-title text-primary" id="myModalLabel160">Liste des colis</h5>
              </div>
     
              <div class="modal-body" tabindex="0" ngbAutofocus>
                <div *ngIf="isAdmin" class="col-md-12 col-12 d-flex justify-content-md-end" >
                  <div
                      class="col-12 d-flex align-items-center justify-content-end pr-1 pb-1 pl-1 pl-md-0 pb-md-0">
                      <label class="d-flex align-items-center" > 
  
                          <ng-select [items]="listFournisseur" name="fournisseur" bindLabel="nom_f"
                              bindValue="iduser" placeholder="Filtrer par fournisseur"
                              (change)="filterUpdate($event)" [(ngModel)]="selectedFournisseur">
                              <ng-template ng-label-tmp let-item="item">
                                  <span>{{  item.nom_f + ' ' + item.prenom_f }}</span>
                              </ng-template>
                              <ng-template ng-option-tmp let-item="item" let-search="searchTerm"
                                  let-index="index">
                                  <span>{{ item.nom_f + ' ' + item.prenom_f }}</span>
                              </ng-template>
                          </ng-select>
                      </label>
                  </div>
              </div>
                <ngx-datatable
                [rows]="filteredColis"
                [rowHeight]="58"
                class="bootstrap core-bootstrap"
                [limit]="10"
                [columnMode]="ColumnMode.force"
                [headerHeight]="40"
                [footerHeight]="50"
                [scrollbarH]="true"
                [selectionType]="SelectionType.checkbox"
                [limit]="basicSelectedOption"
                let row
              >
                <ngx-datatable-column name="Code à barres" prop="bar_code" [width]="170"></ngx-datatable-column>
                <ngx-datatable-column name="Nom du client" prop="nom_c" [width]="150">
                  <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.nom_c}} {{ row.prenom_c}}
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="Numéro de téléphone" prop="tel_c_1" [width]="200"></ngx-datatable-column>
                <ngx-datatable-column name="Date de création" prop="date_creation" [width]="200">
                  <ng-template let-value="value" ngx-datatable-cell-template>
                    {{value | date:'dd/MM/yyyy'}}
                  </ng-template>
      
                </ngx-datatable-column>
                <ngx-datatable-column name="COD" prop="cod" [width]="80"></ngx-datatable-column>
                <ngx-datatable-column name="Etat" prop="etat" [width]="'auto'" [minWidth]="150" >
                  <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <div
                      class="badge badge-pill badge-light-success"
                      [ngClass]="{
                        'badge-light-primary': row.etat === 'cree',
                        'badge-light-success': row.etat == 'enStock' || row.etat === 'enCoursDeLivraison',
                        'badge-light-warning': row.etat === 'livre',
                        'badge-light-secondary': row.etat === 'livrePaye',
                        'badge-light-dark': row.etat === 'planificationRetour' || row.etat === 'enCoursDeTransfert',
                        'badge-light-danger': row.etat === 'retourne',
                        'badge-light-info': row.etat === 'enAttenteDEnlevement' || row.etat === 'retourEchange'
                      }"
                    >
                   {{ value }}
                    </div>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="Service" prop="service" [width]="110"></ngx-datatable-column>
                <ngx-datatable-column name="Adresse Livraison" prop="adresse" [width]="'auto'" [minWidth]="150"></ngx-datatable-column>
       
              </ngx-datatable>
              </div>
          </div>
      </div>
  </section>
</ng-template>